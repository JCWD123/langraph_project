# 企业信息收集工具（官网数据验证版）

基于网络搜索的智能企业信息收集系统，**专注于官网数据验证和结构化输出**。

## ✨ 主要特性

- **🌐 官网数据优先**: 专注于从企业官方网站获取真实可靠的信息
- **🔍 数据验证机制**: 自动验证数据来源，过滤非官网信息
- **📊 结构化输出**: 支持CSV、Excel格式的结构化数据导出
- **📈 质量评估**: 提供数据完整度统计和可信度分析
- **📁 多格式报告**: 同时生成PDF详细报告和数据表格
- **🎯 字段化收集**: 按预定义字段收集信息，便于后续分析

## 🔍 官网数据验证

### 数据来源筛选
- **优先级**: 官网 > 权威媒体 > 行业报告 > 其他来源
- **URL验证**: 自动识别和验证官方网站链接
- **内容过滤**: 移除"据悉"、"传言"等不可靠信息
- **来源标注**: 每条信息都标注具体的数据来源

### 可信度评级
- **A级**: 官方数据，有官网链接且信息完整
- **B级**: 部分官方数据，信息较完整
- **C级**: 数据不足或无法验证

## 📋 收集字段结构

### 企业基础信息
- 企业全称、成立时间、注册资本、员工规模
- 总部地址、官网地址、联系电话、联系邮箱

### 产品信息
- 主营产品类别、核心产品型号、产品应用领域
- 技术特点、产品优势、市场定位、产品认证

### 技术实力
- 研发团队规模、核心技术专利、专利数量
- 技术创新点、研发投入、技术合作伙伴

### 企业资质
- ISO认证、行业认证、企业荣誉、质量体系

### 数据来源验证
- 官网链接、数据来源页面、信息更新时间、数据可信度

## 🚀 快速开始

### 1. 环境准备
```bash
# 安装依赖
pip install -r requirements.txt
```

### 2. 配置环境变量
创建 `.env` 文件并设置必要的API密钥：
```bash
OPENAI_API_KEY=your_openai_api_key
TAVILY_API_KEY=your_tavily_api_key
```

### 3. 运行系统
```bash
# 使用默认企业列表（专注官网数据）
python main.py

# 指定特定企业
python main.py 华为 小米 比亚迪

# 测试功能
python test_official_data.py
```

## 📊 输出文件说明

### CSV文件 (`供应商数据_时间戳.csv`)
- **用途**: 数据分析和进一步处理
- **特点**: 标准化字段结构，支持Excel打开
- **编码**: UTF-8-BOM，完美支持中文

### Excel文件 (`供应商数据_时间戳.xlsx`)
- **主表**: 企业数据，包含所有收集字段
- **统计表**: 数据质量统计，字段完整度分析
- **用途**: 人工查看和数据质量评估

### PDF报告
- **单独报告**: 每个企业的详细信息报告
- **合并报告**: 所有企业信息的综合报告
- **用途**: 汇报展示和长期存档

## 📈 数据质量统计

系统会自动生成以下统计信息：

### 字段完整度分析
- 每个字段的有效数据数量
- 数据完整度百分比排行
- 缺失数据的统计分析

### 数据可信度分布
- A级数据（官方来源）的企业数量和比例
- B级数据（部分官方）的企业数量和比例  
- C级数据（数据不足）的企业数量和比例

## ⚙ 配置定制

### 修改收集字段
在 `suppliers_config.py` 中修改 `CSV_FIELDS` 列表：
```python
CSV_FIELDS = [
    "企业全称",
    "成立时间", 
    # 添加新字段...
    "自定义字段"
]
```

### 调整查询模板
修改 `QUERY_TEMPLATE` 以适应特定需求：
```python
QUERY_TEMPLATE = """
请为我收集 {supplier} 的详细产品信息，**重点要求**：
- 优先使用官网信息
- 标注数据来源
# 自定义要求...
"""
```

### 配置验证规则
在 `DATA_CLEANING_RULES` 中设置数据清洗规则：
```python
DATA_CLEANING_RULES = {
    "移除关键词": ["据悉", "传言", "预计"],
    "官网验证关键词": ["官方发布", "官网显示"],
    "必须包含链接": True
}
```

## 🔧 技术架构

### 核心组件
1. **数据处理器** (`data_processor.py`): 结构化数据提取和验证
2. **搜索引擎** (`web_search.py`): 基于Tavily的网络搜索
3. **工作流引擎** (`graph.py`): 基于LangGraph的任务编排
4. **配置管理** (`suppliers_config.py`): 字段定义和验证规则

### 数据流程
1. **查询生成**: 基于模板生成官网优先的搜索查询
2. **信息搜索**: 执行网络搜索，收集原始数据
3. **数据提取**: 使用正则表达式和模式匹配提取结构化信息
4. **来源验证**: 验证数据来源，评估可信度
5. **质量评估**: 计算数据完整度和整体质量评级
6. **格式输出**: 生成CSV、Excel和PDF多种格式文件

## 📝 使用示例

### 基础使用
```bash
# 分析默认企业列表
python main.py

# 分析指定企业
python main.py "华为技术有限公司"

# 批量分析
python main.py 华为 小米 比亚迪 腾讯
```

### 数据处理示例
```python
from data_processor import DataProcessor

# 创建处理器
processor = DataProcessor()

# 提取结构化数据
structured_data = processor.extract_structured_data("华为", raw_response)

# 验证数据质量
validation = processor.validate_official_data(structured_data)

# 导出CSV
processor.export_to_csv([structured_data], "output.csv")
```

## 🎯 最佳实践

### 数据质量优化
1. **关键词优化**: 在查询中明确要求官网信息
2. **来源验证**: 检查返回结果中的URL链接
3. **交叉验证**: 对比多个来源的信息一致性
4. **及时更新**: 定期更新企业信息以保持时效性

### 结果处理建议
1. **CSV数据**: 适合导入到数据分析工具进行进一步处理
2. **Excel文件**: 查看数据质量统计，识别需要补充的信息
3. **PDF报告**: 用于正式汇报和存档
4. **质量评级**: 优先使用A级和B级数据，谨慎使用C级数据

## 🔍 故障排除

### 常见问题
1. **无官网数据**: 检查企业名称是否准确，尝试添加"有限公司"等后缀
2. **数据不完整**: 查看Excel统计表，了解哪些字段缺失较多
3. **可信度较低**: 检查搜索结果是否包含官网链接

### 调试模式
```python
# 启用详细日志
import logging
logging.basicConfig(level=logging.DEBUG)

# 测试数据提取
python test_official_data.py
```

## 📞 技术支持

如有问题或建议，请：
1. 查看 `test_official_data.py` 验证功能
2. 检查数据质量统计表
3. 查看控制台输出的错误信息

---

*本工具专注于从官方渠道收集企业信息，确保数据的真实性和可靠性。* 